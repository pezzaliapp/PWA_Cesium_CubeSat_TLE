<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>CubeSat Orbit — CesiumJS (PWA) v5b MobileSafe</title>
  <meta name="theme-color" content="#0b1022" />
  <meta name="description" content="PWA CesiumJS stabile per visualizzare orbite satellitari in tempo reale. Compatibile con iPhone e iPad." />
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Cesium -->
  <link href="https://cdn.jsdelivr.net/npm/cesium@1.120.0/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>

<body id="app" class="app-root">
  <header><h1>🛰️ CubeSat Orbit — CesiumJS (PWA) <strong>v5b MobileSafe</strong></h1></header>
  <main>
    <div id="viewer"></div>

    <section class="card controls">
      <label for="tle">TLE (Two-Line Elements)</label>
      <textarea id="tle" spellcheck="false">ISS (ZARYA)
1 25544U 98067A   24299.50000000  .00016717  00000-0  10270-3 0  9995
2 25544  51.6437  28.9044 0005712  35.3822  65.1452 15.50386381445585</textarea>

      <div class="two">
        <div><label>Durata (minuti)</label><input id="minutes" type="number" value="120" min="10" max="1440"></div>
        <div><label>Δt (secondi)</label><input id="step" type="number" value="30" min="1" max="600"></div>
      </div>

      <div class="btns">
        <button id="simulate">▶️ Simula</button>
        <button id="play">⏯️ Play/Pause</button>
        <button id="reset">🔄 Reset</button>
        <button id="btnInstall" hidden>➕ Installa</button>
      </div>

      <div id="status" class="pill">Stato: pronto</div>

      <div class="two info">
        <div><strong>Telemetria</strong><pre id="telemetry">Altitudine: -
Velocità: -
Periodo: -
Lat/Lon: -</pre></div>
        <div><strong>Sole</strong><pre id="suninfo">Subsolare: -
Azimut/Elev: -</pre></div>
      </div>

      <pre id="log">Log…</pre>
    </section>

    <footer>MIT © 2025 — pezzaliAPP.com</footer>
  </main>

  <!-- Script -->
  <script src="https://cdn.jsdelivr.net/npm/cesium@1.120.0/Build/Cesium/Cesium.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/satellite.js@4.0.0/dist/satellite.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
